## Walkthrough to msfconsole module on THM

### What is metasploit
#### A:
* a framework used for penetration testing
* Can be used from info-gathering to post exoloitation
* built from modules

### Module Types

#### Auxiliary
* Scanners / Crawlers / Fuzzers

#### Encoders
* Allows to encode the exploit/payload to bypass anti-virus

#### Evasions
* In addition to encoders , Evasion modules try many techniches to bypass AV

#### Exploits
* Uses known vulnerabilities to get access to the system

#### NOPs
* do nothing
* used as a buffer to achieve consistent payload sizes

#### Payloads
* the code that runs on the victims system
* examples: getting a shell, loading a malware, creating a backdoor

#### POST
* used in post exploitation faze
* example: persistance, migration, 

#### Basic command
* inside msfconsole you can use most of linux commads(ls,cd and more)
* `help` -> show all command 
* `help $COMMAND` -> show info on specific command
* `history` -> print history of command in this run of msf
* `search $MODULE` -> search in the module database of metasploit
    * search type:[auxilary/exploit/payload] $MODULE
* `use $MODULE` -> select a specific module 
* `show options` -> check module settings
* `info` -> show extra info on the exploit
* `set $OPTION $VALUE` -> set a option with a value
* `unset $OPTION` -> delete value from option
* `unset all` -> clear all options
* `show payloads` -> show list of avalible payloads
* `setg` -> "set global", set options to work on all modules
* `unsetg` -> unset parameters set with setg
* `run` / `exploit` -> run exploit/payload
    *  `exploit -z` -> will run in the background
* `check` -> some modules can check exploit, without exploiting
* `background` -> background active session
    * `CTRL+Z` also works 
* `sessions` -> list all backgrounded sessions
    * `sessions -i $ID` -> will insert you to the session

### Often Set Options
* `rhost` --> ip of victim machine
    * possible to set a network (/24) or a file that contains ip's
* `rport` --> remote port(port of victim)
* `payload` --> what will run on victim systems
* `lhost` --> attackes IP
* `lport` --> attackes port to connect to(reverse shell)
* `session` --> somtimes need to select active session


### mdfdb
* METASPLOIT framework allows creating projects for every pt
* It allows us to seprate every penetration test and save all the progress
```bash
#Turn on msdb functinability
msfdb init

# List all current workspaces
workspace

# add new workspace
workspace -a $NAME

# Switch to workspaces
workspace $NAME

#List workspace Commands
workspace -h

#run nmap scan inside database
# save the results inside the database
db_nmap -sV -p- $IP
#Get info about the scan
hosts/services
```